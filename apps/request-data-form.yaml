id: request_data_form
type: io.kestra.plugin.ee.apps.Execution
displayName: Form to request and download data
namespace: company.team
flowId: get_data
access: 
  type: PUBLIC

layout:
  - on: OPEN
    blocks:
      - type: io.kestra.plugin.ee.apps.core.blocks.Markdown
        content: |
          ## Request data
          Select the dataset you want to download.
      - type: io.kestra.plugin.ee.apps.execution.blocks.CreateExecutionForm
      - type: io.kestra.plugin.ee.apps.execution.blocks.CreateExecutionButton
        text: Submit

  - on: RUNNING
    blocks:
      - type: io.kestra.plugin.ee.apps.core.blocks.Markdown
        content: |
          ## Fetching your data...
          Don't close this window. The results will be displayed as soon as the processing is complete.
      
      - type: io.kestra.plugin.ee.apps.core.blocks.Loading
      - type: io.kestra.plugin.ee.apps.execution.blocks.Logs
      - type: io.kestra.plugin.ee.apps.execution.blocks.CancelExecutionButton
        text: Cancel request

  - on: SUCCESS
    blocks:
      - type: io.kestra.plugin.ee.apps.core.blocks.Markdown
        content: |
          ## Request processed successfully
          You requested the following dataset:

      - type: io.kestra.plugin.ee.apps.execution.blocks.Inputs

      - type: io.kestra.plugin.ee.apps.core.blocks.Alert
        style: SUCCESS
        showIcon: true
        content: Your data is ready for download!

      - type: io.kestra.plugin.ee.apps.execution.blocks.Outputs

      - type: io.kestra.plugin.ee.apps.core.blocks.Markdown
        content: Find more App examples in the linked repository

      - type: io.kestra.plugin.ee.apps.core.blocks.Button
        text: App examples
        url: https://github.com/kestra-io/enterprise-edition-examples
        style: INFO

      - type: io.kestra.plugin.ee.apps.core.blocks.Button
        text: Submit new request
        url: "{{ app.url }}"
        style: DEFAULT
      
      - type: io.kestra.plugin.ee.apps.core.blocks.RedirectTo
        delay: PT60S
        url: https://kestra.io/docs/

description: |
  This Kestra App provides a simple way for users to request and download datasets
  directly through a self-service form. Once the request is submitted, the backend 
  flow runs automatically to fetch the requested data and deliver it back for download. 

  The App includes:
    - **OPEN**: A form for selecting the dataset and submitting the request
    - **RUNNING**: A progress screen showing logs while the data is being processed
    - **SUCCESS**: Outputs with links for downloading the dataset, plus options to make new requests
    - **Redirect**: Automatically redirects users to Kestra documentation after a set delay

  This flow is well-suited for reporting and analytics use cases, 
  giving teams an automated, repeatable way to access data without manual intervention.

extend:
  title: Request and download datasets via form
  description: |
    This Kestra App enables self-service dataset requests with automated processing 
    and delivery back to the user.

    **How it works**
      - Users select a dataset via a simple form
      - The App launches the `get_data` flow to process the request
      - Progress is displayed with logs during execution
      - On success, the inputs and outputs are shown, and the dataset can be downloaded
      - Users can submit a new request or explore more App examples

    **Configuration:**
      - Update the `flowId` to point to the flow responsible for retrieving datasets
      - Customize form fields to allow users to specify dataset name, time range, or filters
      - Adjust the redirect URL and delay to point to your internal documentation
      - Modify messages to match your organizationâ€™s data governance guidelines

    This App is ideal for reporting and analytics use cases, 
    removing manual steps while ensuring datasets are delivered consistently.

  tags:
    - Getting Started
  ee: true
  demo: false
  meta_description: |
    Kestra App to request and download datasets via a form. Users submit requests, 
    see progress, and download data directly. Simplifies reporting and analytics workflows.
