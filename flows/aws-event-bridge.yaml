id: aws-event-bridge
namespace: company.team

tasks:
  - id: send_events
    type: io.kestra.plugin.aws.eventbridge.PutEvents
    entries:
      - source: kestra
        eventBusName: default
        detailType: my-custom-app
        detail:
          message: this could be any event - a user sign-in event or a payment
      - source: kestra
        eventBusName: default
        detailType: my-custom-app
        detail:
          message: this could also be any event - an IoT device event or a sensor reading
      - source: kestra
        eventBusName: default
        detailType: my-custom-app
        detail:
          message: another event which could be a user sign-out event or a newsletter
            subscription

  - id: extract_json
    type: io.kestra.plugin.core.http.Download
    uri: https://huggingface.co/datasets/kestra/datasets/raw/main/json/app_events.json

  - id: json_to_ion
    type: io.kestra.plugin.serdes.json.JsonToIon
    from: "{{ outputs.extract_json.uri }}"
    newLine: false

  - id: send_events_json
    type: io.kestra.plugin.aws.eventbridge.PutEvents
    entries: "{{ outputs.json_to_ion.uri }}"

extend:
  shortDescription: "This blueprint shows how to publish custom application events to AWS EventBridge, enabling event-driven architectures, serverless workflows, and real-time."
  title: Publish Application and System Events to AWS EventBridge for Event-Driven Architectures
  description: |
    This blueprint shows how to **publish custom application events to AWS
    EventBridge**, enabling event-driven architectures, serverless workflows,
    and real-time integrations across AWS services.

    The flow demonstrates two common event publishing patterns:

    - **Direct event publishing** using inline event definitions for application
      events such as user actions, payments, IoT signals, or system notifications.
    - **Bulk event ingestion** by downloading structured JSON event data,
      converting it to Amazon ION format, and sending it to EventBridge in a
      single operation.

    This approach is ideal for:
      - Event-driven microservices
      - Serverless architectures
      - Application event streaming
      - IoT and telemetry pipelines
      - Decoupling producers and consumers using AWS-native messaging

    When working with file-based events, the flow converts JSON to **ION**, the
    format required by the AWS EventBridge API to process events row by row.
    This makes it easy to reuse existing event payloads generated by other
    systems or exported from logs and datasets.

    Configuration:
      - Adjust the event bus name, source, and detail type to match your AWS
        EventBridge setup.
      - Use inline events for simple application signals.
      - Use JSON-to-ION conversion when ingesting events from external systems
        or files.
      - Secure AWS credentials using secrets or IAM roles.

    This blueprint provides a reusable foundation for building **scalable,
    loosely coupled, event-driven systems on AWS**.
  tags:
    - Cloud
  ee: false
  demo: false
  meta_description: |
    Send custom application, system, or IoT events to AWS EventBridge.
    Publish inline or file-based events to power event-driven architectures and
    serverless workflows on AWS.
