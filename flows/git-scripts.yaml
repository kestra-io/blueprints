id: git-scripts
namespace: company.team

tasks:
  - id: scripts
    type: io.kestra.plugin.core.flow.WorkingDirectory
    tasks:
      - id: clone_repository
        type: io.kestra.plugin.git.Clone
        url: https://github.com/kestra-io/scripts
        branch: main

      - id: run_script
        type: io.kestra.plugin.scripts.shell.Commands
        taskRunner:
          type: io.kestra.plugin.scripts.runner.docker.Docker
        commands:
          - cd scripts
          - chmod +x hello_world.sh
          - ./hello_world.sh

extend:
  shortDescription: "This flow clones a git repository and runs a shell script."
  title: Clone a GitHub repository and run a Shell script
  description: |
    This flow clones a git repository and runs a shell script.

    - You can add `username` and `password` on the `git.Clone` task but note
    that they are required only for private repositories. When using public
    GitHub repositories such as [this
    one](https://github.com/kestra-io/scripts), you can only reference the `url`
    and `branch`  name.
  tags:
    - Infrastructure
  ee: false
  demo: true
  meta_description: This flow clones a git repository and runs a Shell script.
